- @title = "Transactions"

- content_for :head do
  = javascript_include_tag "lib/restful_destroy", "transactions/index"

%ul
  %li= link_to "All", url(:transactions, :index)
  %li= link_to "Checking", url(:transactions, :index, :account_id => "checking")
  %li= link_to "Savings", url(:transactions, :index, :account_id => "savings")

- if @transactions.any?
  - form_tag url(:transactions, :dispatch), :id => "form" do
    %p
      = submit_tag "Delete checked", :name => "delete_checked", :id => "delete_checked", :class => "delete", :title => "Are you sure you want to delete these transactions?"
    %table#transactions
      %tr
        %th
        %th Date
        %th Check #
        %th Description
        %th Amount
      - for transaction in @transactions
        %tr{:id => "transaction_#{transaction.id}"}
          %td= check_box_tag "to_delete[]", :value => transaction.id, :id => "to_delete_#{transaction.id}"
          %td= transaction.settled_on.strftime("%m/%d/%Y")
          %td= transaction.check_number
          %td= transaction.description
          %td= transaction.amount_as_currency
          %td= link_to "Delete", url(:transactions, :delete, :id => transaction.id), :class => "delete", :title => "Are you sure you want to delete this transaction?"
- else
  %p No transactions.

- if @account_id
  %p= link_to "Upload transactions to #{@account_id}", url(:transactions, :upload, :account_id => @account_id)

%hr

%p= link_to "Clear all transactions", url(:transactions, :clear)